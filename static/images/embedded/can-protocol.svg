<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="400" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 18px Arial; fill: #64ffda; }
      .label { font: 12px Arial; fill: #ccd6f6; }
      .can-line { stroke: #64ffda; stroke-width: 3; }
      .node { fill: #8892b0; stroke: #64ffda; }
      .message { fill: #4ecdc4; stroke: #64ffda; }
      .priority { fill: #ff6b6b; opacity: 0.7; }
      .data-field { fill: #ffd700; opacity: 0.7; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="400" fill="#0a192f"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="title">CAN Protocol (Controller Area Network)</text>
  
  <!-- CAN Bus -->
  <line x1="100" y1="100" x2="700" y2="100" class="can-line"/>
  <text x="400" y="90" text-anchor="middle" class="label">CAN Bus (Twisted Pair: CAN-H and CAN-L)</text>
  
  <!-- Termination Resistors -->
  <rect x="90" y="95" width="20" height="10" fill="#64ffda"/>
  <text x="85" y="85" class="label">120Ω</text>
  
  <rect x="690" y="95" width="20" height="10" fill="#64ffda"/>
  <text x="695" y="85" class="label">120Ω</text>
  
  <!-- CAN Nodes -->
  <!-- ECU 1 -->
  <rect x="120" y="60" width="80" height="50" class="node" rx="5"/>
  <text x="160" y="80" text-anchor="middle" class="label">ECU 1</text>
  <text x="160" y="95" text-anchor="middle" class="label">(Engine)</text>
  <line x1="160" y1="110" x2="160" y2="100" class="can-line"/>
  
  <!-- ECU 2 -->
  <rect x="280" y="60" width="80" height="50" class="node" rx="5"/>
  <text x="320" y="80" text-anchor="middle" class="label">ECU 2</text>
  <text x="320" y="95" text-anchor="middle" class="label">(Transmission)</text>
  <line x1="320" y1="110" x2="320" y2="100" class="can-line"/>
  
  <!-- ECU 3 -->
  <rect x="440" y="60" width="80" height="50" class="node" rx="5"/>
  <text x="480" y="80" text-anchor="middle" class="label">ECU 3</text>
  <text x="480" y="95" text-anchor="middle" class="label">(ABS)</text>
  <line x1="480" y1="110" x2="480" y2="100" class="can-line"/>
  
  <!-- ECU 4 -->
  <rect x="600" y="60" width="80" height="50" class="node" rx="5"/>
  <text x="640" y="80" text-anchor="middle" class="label">ECU 4</text>
  <text x="640" y="95" text-anchor="middle" class="label">(Dashboard)</text>
  <line x1="640" y1="110" x2="640" y2="100" class="can-line"/>
  
  <!-- CAN Frame Structure -->
  <text x="50" y="160" class="label">CAN Message Frame Structure:</text>
  
  <!-- Frame fields -->
  <rect x="50" y="180" width="30" height="25" class="priority" rx="3"/>
  <text x="65" y="197" text-anchor="middle" class="label">SOF</text>
  
  <rect x="90" y="180" width="60" height="25" class="priority" rx="3"/>
  <text x="120" y="197" text-anchor="middle" class="label">ID (11-bit)</text>
  
  <rect x="160" y="180" width="30" height="25" class="priority" rx="3"/>
  <text x="175" y="197" text-anchor="middle" class="label">RTR</text>
  
  <rect x="200" y="180" width="30" height="25" class="priority" rx="3"/>
  <text x="215" y="197" text-anchor="middle" class="label">IDE</text>
  
  <rect x="240" y="180" width="30" height="25" class="priority" rx="3"/>
  <text x="255" y="197" text-anchor="middle" class="label">r0</text>
  
  <rect x="280" y="180" width="40" height="25" class="data-field" rx="3"/>
  <text x="300" y="197" text-anchor="middle" class="label">DLC</text>
  
  <rect x="330" y="180" width="80" height="25" class="data-field" rx="3"/>
  <text x="370" y="197" text-anchor="middle" class="label">DATA (0-8B)</text>
  
  <rect x="420" y="180" width="50" height="25" class="message" rx="3"/>
  <text x="445" y="197" text-anchor="middle" class="label">CRC</text>
  
  <rect x="480" y="180" width="30" height="25" class="message" rx="3"/>
  <text x="495" y="197" text-anchor="middle" class="label">ACK</text>
  
  <rect x="520" y="180" width="30" height="25" class="message" rx="3"/>
  <text x="535" y="197" text-anchor="middle" class="label">EOF</text>
  
  <!-- Priority Arbitration -->
  <text x="50" y="240" class="label">Priority Arbitration Example:</text>
  
  <!-- Message 1 (Higher Priority) -->
  <text x="50" y="260" class="label">Node A: ID=0x123 (Higher Priority)</text>
  <rect x="250" y="250" width="100" height="20" class="priority" rx="3"/>
  <text x="300" y="263" text-anchor="middle" class="label">Wins arbitration</text>
  
  <!-- Message 2 (Lower Priority) -->
  <text x="50" y="285" class="label">Node B: ID=0x456 (Lower Priority)</text>
  <rect x="250" y="275" width="100" height="20" fill="#8892b0" rx="3"/>
  <text x="300" y="288" text-anchor="middle" class="label">Waits for next slot</text>
  
  <!-- Features -->
  <text x="50" y="320" class="label">Key Features:</text>
  <text x="50" y="340" class="label">• Message-based (not address-based)</text>
  <text x="50" y="355" class="label">• Priority-based arbitration</text>
  <text x="50" y="370" class="label">• Built-in error detection/correction</text>
  <text x="50" y="385" class="label">• Fault tolerance (bus-off state)</text>
  
  <text x="400" y="320" class="label">Applications:</text>
  <text x="400" y="340" class="label">• Automotive ECU communication</text>
  <text x="400" y="355" class="label">• Industrial automation</text>
  <text x="400" y="370" class="label">• Medical equipment</text>
  <text x="400" y="385" class="label">• Real-time control systems</text>
</svg>
